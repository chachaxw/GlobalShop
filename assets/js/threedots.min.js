!function(e){function t(t,i){if(1==e.fn.ThreeDots.c_settings.allow_dangle)return!1;var r=e(t).children("."+e.fn.ThreeDots.c_settings.e_span_class).get(0),a=e(r).css("display"),o=n(t,i);e(r).css("display","none");var s=n(t,i);return e(r).css("display",a),o>s?!0:!1}function n(t,n){var i=typeof n;if("object"==i||void 0==i)return e(t).height()/n.lh;if("boolean"==i){var a=r(e(t));return{lh:a}}}function i(t){var i=e.fn.ThreeDots.c_settings.valid_delimiters;t=jQuery.trim(t);var r=-1,a=null,o=null;return jQuery.each(i,function(e,n){if(1!=new String(n).length||null==n)return!1;var i=t.lastIndexOf(n);-1!=i&&i>r&&(r=i,a=t.substring(r+1),o=n)}),r>0?{updated_string:jQuery.trim(t.substring(0,r)),word:a,del:o}:{updated_string:"",word:jQuery.trim(t),del:null}}function r(t){e(t).append("<div id='temp_ellipsis_div' style='position:absolute; visibility:hidden'>H</div>");var n=e("#temp_ellipsis_div").height();return e("#temp_ellipsis_div").remove(),n}function a(t,i,r){var u,l,f,d,p,a=e(i).text(),o=a,s=e.fn.ThreeDots.c_settings.max_rows;if(!(n(t,r)<=s))for(p=0,curr_length=o.length,curr_middle=Math.floor((curr_length-p)/2),u=a.substring(p,p+curr_middle),l=a.substring(p+curr_middle);0!=curr_middle;)e(i).text(u),n(t,r)<=s?(d=Math.floor(l.length/2),f=l.substring(0,d),p=u.length,o=u+f,curr_length=o.length,e(i).text(o)):(o=u,curr_length=o.length),curr_middle=Math.floor((curr_length-p)/2),u=a.substring(0,p+curr_middle),l=a.substring(p+curr_middle)}e.fn.ThreeDots=function(t){var n=this;if("object"==typeof t||void 0==t){e.fn.ThreeDots.the_selected=this;var n=e.fn.ThreeDots.update(t)}return n},e.fn.ThreeDots.update=function(r){var o,p,h,g,m,v,s=null;if("object"==typeof r||void 0==r){e.fn.ThreeDots.c_settings=e.extend({},e.fn.ThreeDots.settings,r);var y=e.fn.ThreeDots.c_settings.max_rows;if(1>y)return e.fn.ThreeDots.the_selected;var b=!1;if(jQuery.each(e.fn.ThreeDots.c_settings.valid_delimiters,function(e,t){1==new String(t).length&&(b=!0)}),0==b)return e.fn.ThreeDots.the_selected;e.fn.ThreeDots.the_selected.each(function(){if(o=e(this),0==e(o).children("."+e.fn.ThreeDots.c_settings.text_span_class).length)return!0;p=e(o).children("."+e.fn.ThreeDots.c_settings.text_span_class).get(0);var r=n(o,!0),u=e(p).text();a(o,p,r);var l=e(p).text();if(void 0!=(m=e(o).attr("threedots"))&&(e(p).text(m),e(o).children("."+e.fn.ThreeDots.c_settings.e_span_class).remove()),g=e(p).text(),g.length<=0&&(g=""),e(o).attr("threedots",u),n(o,r)>y){for(curr_ellipsis=e(o).append('<span style="white-space:nowrap" class="'+e.fn.ThreeDots.c_settings.e_span_class+'">'+e.fn.ThreeDots.c_settings.ellipsis_string+"</span>");n(o,r)>y&&(h=i(e(p).text()),e(p).text(h.updated_string),s=h.word,v=h.del,null!=v););if(null!=s){var f=t(o,r);if(n(o,r)<=y-1||f||!e.fn.ThreeDots.c_settings.whole_word)if(g=e(p).text(),null!=h.del&&e(p).text(g+v),n(o,r)>y)e(p).text(g);else if(e(p).text(e(p).text()+s),n(o,r)>y+1||!e.fn.ThreeDots.c_settings.whole_word||l==s||f)for(;n(o,r)>y&&e(p).text().length>0;)e(p).text(e(p).text().substr(0,e(p).text().length-1))}}u==e(e(o).children("."+e.fn.ThreeDots.c_settings.text_span_class).get(0)).text()?e(o).children("."+e.fn.ThreeDots.c_settings.e_span_class).remove():e(o).children("."+e.fn.ThreeDots.c_settings.e_span_class).length>0&&(e.fn.ThreeDots.c_settings.alt_text_t&&e(o).children("."+e.fn.ThreeDots.c_settings.text_span_class).attr("title",u),e.fn.ThreeDots.c_settings.alt_text_e&&e(o).children("."+e.fn.ThreeDots.c_settings.e_span_class).attr("title",u))})}return e.fn.ThreeDots.the_selected},e.fn.ThreeDots.settings={valid_delimiters:[" ",",","."],ellipsis_string:"...",max_rows:2,text_span_class:"ellipsis_text",e_span_class:"threedots_ellipsis",whole_word:!0,allow_dangle:!1,alt_text_e:!1,alt_text_t:!1}}(jQuery);